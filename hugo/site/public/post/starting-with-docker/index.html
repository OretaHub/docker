<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Starting with docker - Material Docs</title>
    <meta name="generator" content="Hugo 0.30.2" />

    
    <meta name="description" content="A material design theme for documentations.">
    
    <link rel="canonical" href="http://dev-rancherhost-01/post/starting-with-docker/">
    
    <meta name="author" content="Digitalcraftsman">
    

    <meta property="og:url" content="http://dev-rancherhost-01/post/starting-with-docker/">
    <meta property="og:title" content="Material Docs">
    <meta property="og:image" content="http://dev-rancherhost-01/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Material Docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://dev-rancherhost-01/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="http://dev-rancherhost-01/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://dev-rancherhost-01/fonts/icon.eot');
        src: url('http://dev-rancherhost-01/fonts/icon.eot')
               format('embedded-opentype'),
             url('http://dev-rancherhost-01/fonts/icon.woff')
               format('woff'),
             url('http://dev-rancherhost-01/fonts/icon.ttf')
               format('truetype'),
             url('http://dev-rancherhost-01/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://dev-rancherhost-01/stylesheets/application.css">
    <link rel="stylesheet" href="http://dev-rancherhost-01/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://dev-rancherhost-01/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://dev-rancherhost-01/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="http://dev-rancherhost-01/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Starting with docker
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/digitalcraftsman" title="@digitalcraftsman on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/digitalcraftsman/hugo-material-docs" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://dev-rancherhost-01images/logo.png">
        </div>
      
      <div class="name">
        <strong>Material Docs <span class="version">1.0.0</span></strong>
        
          <br>
          digitalcraftsman/hugo-material-docs
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/digitalcraftsman/hugo-material-docs/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/digitalcraftsman/hugo-material-docs/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="http://dev-rancherhost-01/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Adding content" href="http://dev-rancherhost-01/adding-content/">
	
	Adding content
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="http://dev-rancherhost-01/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="http://dev-rancherhost-01/license/">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Build OBI Client" href="http://dev-rancherhost-01/content/post/build-obi/">
	
	Build OBI Client
</a>



  
</li>



<li>
  
    



<a  title="Building a Hugo container" href="http://dev-rancherhost-01/post/building-a-hugo-container/">
	
	Building a Hugo container
</a>



  
</li>



<li>
  
    



<a  title="Classes in Python" href="http://dev-rancherhost-01/post/learning-python/classes-in-python/">
	
	Classes in Python
</a>



  
</li>



<li>
  
    



<a  title="Dream Infra as a code" href="http://dev-rancherhost-01/post/dream-infra-as-a-code/">
	
	Dream Infra as a code
</a>



  
</li>



<li>
  
    



<a  title="Getting started with Rancher" href="http://dev-rancherhost-01/post/getting-started-with-rancher/">
	
	Getting started with Rancher
</a>



  
</li>



<li>
  
    



<a  title="How to change the Docker Repo at IAG" href="http://dev-rancherhost-01/post/how-to-change-the-docker-repo-at-iag/">
	
	How to change the Docker Repo at IAG
</a>



  
</li>



<li>
  
    



<a  title="How to use Terraformo" href="http://dev-rancherhost-01/post/terraform/">
	
	How to use Terraformo
</a>



  
</li>



<li>
  
    



<a  title="Installing Syncthing" href="http://dev-rancherhost-01/post/installing-syncthing/">
	
	Installing Syncthing
</a>



  
</li>



<li>
  
    



<a  title="JOdin and Heimdal on MacOsX" href="http://dev-rancherhost-01/post/using-jodin-and-heimdal-on-mac-osx/">
	
	JOdin and Heimdal on MacOsX
</a>



  
</li>



<li>
  
    



<a  title="Learning python" href="http://dev-rancherhost-01/post/learning-python/learning-python/">
	
	Learning python
</a>



  
</li>



<li>
  
    



<a  title="Material" href="http://dev-rancherhost-01/">
	
	Material
</a>



  
</li>



<li>
  
    



<a  title="Postgres backup and restore" href="http://dev-rancherhost-01/post/postgres-backup-and-restore/">
	
	Postgres backup and restore
</a>



  
</li>



<li>
  
    



<a  title="Rancher Transit Vault" href="http://dev-rancherhost-01/post/rancher-transit-vault/">
	
	Rancher Transit Vault
</a>



  
</li>



<li>
  
    



<a  title="Setting up Redhat internal repo IAG" href="http://dev-rancherhost-01/post/redhat-internal-repo/">
	
	Setting up Redhat internal repo IAG
</a>



  
</li>



<li>
  
    



<a class="current" title="Starting with docker" href="http://dev-rancherhost-01/post/starting-with-docker/">
	
	Starting with docker
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="The use of ansible" href="http://dev-rancherhost-01/post/the-use-of-ansible/">
	
	The use of ansible
</a>



  
</li>



<li>
  
    



<a  title="Using DNS as a docker container" href="http://dev-rancherhost-01/post/using-dns-as-a-docker-container/">
	
	Using DNS as a docker container
</a>



  
</li>



<li>
  
    



<a  title="a" href="http://dev-rancherhost-01/a/">
	
	a
</a>



  
</li>



<li>
  
    



<a  title="b" href="http://dev-rancherhost-01/dir1/b/">
	
	b
</a>



  
</li>



<li>
  
    



<a  title="power of regular expressions" href="http://dev-rancherhost-01/post/power-of-regular-expressions/">
	
	power of regular expressions
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/digitalcraftsman" target="_blank" title="@digitalcraftsman on GitHub">
              @digitalcraftsman on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:hello@email.com" title="Email of hello@email.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Starting with docker </h1>

			

<p><a href="http://localhost:1313/">Home</a></p>

<h3 id="span-style-color-blue-important-links-span"><span style="color:blue"> <strong>Important Links</strong> </span></h3>

<p><span style="color:blue">some <strong>This is Blue italic.</strong> text</span></p>

<p><span style="color:red"> <strong>This is Red Bold.</strong> </span></p>

<h2 id="docker-networking-1-1">Docker Networking 1.1</h2>

<h4 id="networks-and-scopes">Networks and Scopes</h4>

<p>What is a Network in the docker world ?</p>

<p>Broadly speaking a Network is a private network ,can also regard it as a domain that allows containers to connect and  communicate with each other</p>

<p>If you connect a container to a network ,you give that container access to all the containers in that network.
FUNCTIONS
 - Intercommunication between a group of containers that belong to the same network, and also
 - provides isolation for these containers from containers that are not part of the same network</p>

<p>What about port mappings rules ?</p>

<p>How to connect to external networks ?</p>

<p>Every Network is backed by a driver</p>

<p>By default docker ships with bridge and overlay drivers</p>

<pre><code>$ docker info
Output truncated....

Plugins:
 Volume: local
 Network: bridge host ipvlan macvlan null overlay

</code></pre>

<h4 id="networks-are-scoped-as-local-or-global">Networks are scoped as local or Global</h4>

<p>Network scopes
Local scope - only visible to that particular engine
Global scope - visible to all the docker engines that are part of the cluster</p>

<p>how to define the scope ?
if the driver is global scope ,while you create a network ,the scope is negotiated</p>

<p>bridge driver is local scope driver
overlay is global scope driver ,the network using this driver will have a global scope</p>

<h3 id="how-to-create-a-docker-network">how to create a docker Network</h3>

<pre><code>$ docker network create

Usage:	docker network create [OPTIONS] NETWORK

Create a network

Options:
      --attachable             Enable manual container attachment
      --aux-address map        Auxiliary IPv4 or IPv6 addresses used by Network driver (default map[])
  -d, --driver string          Driver to manage the Network (default &quot;bridge&quot;)
      --gateway stringSlice    IPv4 or IPv6 Gateway for the master subnet
      --help                   Print usage
      --internal               Restrict external access to the network
      --ip-range stringSlice   Allocate container ip from a sub-range
      --ipam-driver string     IP Address Management Driver (default &quot;default&quot;)
      --ipam-opt map           Set IPAM driver specific options (default map[])
      --ipv6                   Enable IPv6 networking
      --label list             Set metadata on a network (default [])
  -o, --opt map                Set driver specific options (default map[])
      --subnet stringSlice     Subnet in CIDR format that represents a network segment
</code></pre>

<p>EXAMPLE</p>

<pre><code># docker networ create test-network

NETWORK ID          NAME                 DRIVER              SCOPE
e07b557bedf8        bridge               bridge              local

eb3dacf83b45        test-network         bridge              local
</code></pre>

<h3 id="bridge-driver-details">Bridge Driver details</h3>

<pre><code>
 C1      C2                         C4
  \      |                         /
   \     |                        /
   ---------                     -------------
  | Docker0 |  &lt;------X-------&gt; | Some Network|
   ---------                     -------------
      |
      |
      C3
</code></pre>

<p>In the above example the only way for c1 to c4 is via the host namespace and port mappings ,exposed ports from docker0 network ,by default all networks are private ,you can give access by exposing ports .</p>

<h3 id="multi-host-networking">Multi-host networking</h3>

<p>Docker engines that point to a KV store they are all part of the same cluster</p>

<p>How to form topology ?</p>

<p>Below we will create a network toplogy that has 3 network segements as show in the diagram below</p>

<ul>
<li>red</li>
<li>pink</li>
<li>purple</li>
</ul>

<pre><code>                        ------------------------------
                        |   KV store (backed by libkv)|
                        |   consul ,etc, zookeeper    |
                        -------------------------------
                            |          |          |
             _______________|          |          |______
            /                          |                 \
   -------------                ---------------       -------------
  | Red Network |  &lt;----&gt;      |Purple Network |     | Blue Network|
  |             |              |               |     |             |
  | C1   C3     |              |  [C4]    [C5] |     | C7     (C8) |
  |    C2       |              |      [C6]     |     |     C9      |
   -------------                 ---------------      -------------
      |
      |
      C3
</code></pre>

<p>C7 is connected to both red ,pink
C7 can act as</p>

<p>Scope is chosen based on negotiated driver scope</p>

<h3 id="important-links">Important Links</h3>

<h4 id="dockercon-2017-all-video-links">DockerCon 2017 all video links</h4>

<p><a href="https://blog.docker.com/2017/05/dockercon-2017-session-videos-now-live/">https://blog.docker.com/2017/05/dockercon-2017-session-videos-now-live/</a></p>

<h2 id="docker-networking">Docker Networking</h2>

<p>Docker in 1.2 has introduced some awesome features</p>

<p>Commands</p>

<p>docker network</p>

<h4 id="errors">ERRORS</h4>

<p>If you get the below error</p>

<blockquote>
<p>Error when trying to run docker-compose up. &ldquo;oci runtime error:
container_linux.go:247&hellip;&rdquo; #4039</p>
</blockquote>

<p>you can solve it by applying the chmod +x ,i.e making it executable</p>

<h5 id="solution">Solution</h5>

<pre><code class="language-bash"># RUN chmod +x startup.sh
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2018 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://dev-rancherhost-01/post/building-a-hugo-container/" title="Building a Hugo container">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Building a Hugo container
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://dev-rancherhost-01/post/welcome/" title="welcome">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              welcome
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'http:\/\/dev-rancherhost-01';
      var repo_id  = 'digitalcraftsman\/hugo-material-docs';
    
    </script>

    <script src="http://dev-rancherhost-01/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

